# 結婚式パーティーツール 操作マニュアル

## 目次
1. [事前準備](#事前準備)
2. [管理画面へのログイン](#管理画面へのログイン)
3. [投影画面の設定](#投影画面の設定)
4. [参加者の招待](#参加者の招待)
5. [ゲームモードの操作](#ゲームモードの操作)
   - [待機モード](#待機モード)
   - [クイズモード](#クイズモード)
   - [タップチャレンジ(練習)](#タップチャレンジ練習)
   - [タップチャレンジ(本番)](#タップチャレンジ本番)
6. [詳細設定](#詳細設定)
7. [トラブルシューティング](#トラブルシューティング)

---

## 事前準備

### 必要な機材
- **操作用PC/タブレット**: 管理画面を操作するデバイス
- **プロジェクター**: 投影画面を表示(推奨解像度: WXGA 1280×800)
- **参加者用スマートフォン**: ゲスト各自が使用

### 推奨環境
- 安定したインターネット接続(Wi-Fi推奨)
- モダンブラウザ(Chrome、Safari、Edge最新版)

---

## 管理画面へのログイン

### 手順

1. **ブラウザでアクセス**
   - URLを開く: `https://[あなたのサイトURL]/admin`

2. **ルームコードの入力**
   - 既存のルームコードを入力して「→ 管理画面へ」をクリック
   - **または** 新しいルームを作成する場合は「+ 新しいルームを作成」をクリック
     - ルームコードが自動生成され、そのまま管理画面へ遷移します

3. **PIN認証**
   - PINコード(事前に設定された4桁の数字)を入力
   - 「ログイン」をクリック

✅ **ログイン成功**: 管理パネルが表示されます

---

## 投影画面の設定

### プロジェクターへの投影手順

1. **投影画面を開く**
   - 管理画面右上の「投影画面」ボタンをクリック
   - 新しいタブで投影画面が開きます

2. **全画面表示にする**
   - 投影画面で **Fキー** を押す
   - または、画面右下の「全画面表示」ボタンをクリック

3. **プロジェクターに表示**
   - 投影画面タブをプロジェクター側のディスプレイにドラッグ
   - 全画面表示で投影

💡 **ポイント**: 投影画面は操作せず、管理画面で全ての操作を行います

---

## 参加者の招待

### QRコードとURLの共有

管理画面の右側に「参加用URL・QRコード」パネルがあります

#### 方法1: QRコードを表示
- QRコードを投影画面に表示し、参加者がスマホで読み取る

#### 方法2: URLをコピー
1. 「URLをコピー」ボタンをクリック
2. コピーしたURLをLINEやメールで共有

#### ルームコード
- パネル内にルームコード(例: `AB12`)が表示されています
- 参加者はこのコードを使って手動参加も可能

### 参加者側の操作
1. URLにアクセスまたはQRコードを読み取り
2. 姓・名を入力して参加

💡 **参加状況の確認**: 待機モードの投影画面右下に「現在○人のゲストが参加しています」と表示されます

---

## ゲームモードの操作

管理画面には5つのモードがあります:
- **待機モード**: ゲーム開始前の待機状態
- **クイズ**: クイズゲーム
- **タップ(練習)**: 練習用タップチャレンジ(ランキング表示なし)
- **タップ(本番)**: 本番用タップチャレンジ(ランキング表示あり)
- ~~抽選~~ (現在非表示)

---

### 待機モード

#### 概要
- ゲーム開始前の待機画面
- 参加者数がリアルタイムで表示されます

#### 操作
- 「待機モード」ボタンをクリック
- 投影画面に「まもなくゲームが始まります」と表示されます

#### 使用タイミング
- パーティー開始前
- ゲーム間の休憩時

---

### クイズモード

#### 概要
- 結婚式に関連した6問のクイズゲーム
- 第1〜5問: 通常クイズ(各10点)
- 第6問: 早押しクイズ(特別ルール)

#### 操作手順

##### 1. モード切替
1. 「クイズ」ボタンをクリック
2. 投影画面に「Quiz」タイトルと「開始まで少々お待ちください」が表示

##### 2. 設定の確認(クイズ操作パネル内)
- **代表者制**: チェックを入れると、各テーブル1名のみ回答可能
- 設定は「詳細設定」→「代表者設定」タブで事前登録が必要

##### 3. クイズの進行

**第1問〜第5問(通常クイズ)**

1. **クイズ表示**: 「クイズ開始」ボタンをクリック
   - 投影画面に問題文と選択肢(A/B/C/D)が表示
   - 参加者はスマホで回答

2. **回答状況の確認**
   - 管理画面に「回答状況: ○/○人 (○%)」と表示
   - 全員が回答するまで待つ、または十分な人数が回答したら次へ

3. **正解公開**: 「正解を公開」ボタンをクリック
   - 投影画面に正解が表示(正解の選択肢が赤色でハイライト)
   - 各選択肢の回答数も表示

4. **次のクイズへ**: 「次のクイズへ」ボタンをクリック
   - 第2問以降も同様に繰り返し

5. **第5問終了後**: 「ランキング表示へ」ボタンをクリック
   - 全体ランキングが表示(1位〜12位、正解数順)

**第6問(早押しクイズ)**

1. **早押しクイズ開始**: 緑色の「早押しクイズ開始」ボタンをクリック
   - 制限時間10秒固定
   - 参加者は最速で回答を競う

2. **ランキング表示**: 「ランキングを表示」ボタンをクリック
   - 正解者のみ、回答速度順にランキング表示
   - 回答時間(秒数)も表示されます

##### 4. クイズリセット(必要に応じて)
- 「クイズリセット」ボタンで全ての回答履歴をクリア
- 1問目から再開できます

#### 💡 クイズ操作のコツ
- 代表者制を使うと、混雑を避けて各テーブルの代表が1名ずつ回答します
- 回答状況を見ながら、全員が回答したタイミングで正解公開すると盛り上がります

---

### タップチャレンジ(練習)

#### 概要
- スマホ画面を連打してタップ数を競うゲーム
- **練習モード**: ランキング表示なし、参加者が操作に慣れるための練習用

#### 操作手順

##### 1. モード切替
1. 「タップ(練習)」ボタンをクリック
2. 投影画面に「Tap Challenge」タイトルが表示

##### 2. カウントダウンとタップ時間の設定
- **カウントダウン**: 開始前の準備時間(デフォルト: 3秒)
- **タップ時間**: タップできる時間(デフォルト: 10秒)
- 数値を入力して変更可能

##### 3. スタート
1. 「スタート」ボタンをクリック
2. 投影画面にカウントダウン表示: **3 → 2 → 1 → START!**
3. タップ時間が表示され、カウントダウン開始: **10 → 9 → ... → 1 → STOP!**
4. 自動停止

##### 4. 緊急停止
- 何か問題があれば「緊急停止」ボタンで即座に停止

#### 💡 練習モードの使い方
- 本番前に参加者が操作に慣れるための練習ラウンドとして実施
- ランキングは表示されないので、気軽に練習できます

---

### タップチャレンジ(本番)

#### 概要
- スマホ画面を連打してタップ数を競うゲーム
- **本番モード**: ゲーム終了後にランキング表示あり

#### 操作手順

##### 1. モード切替
1. 「タップ(本番)」ボタンをクリック
2. 投影画面に「Tap Challenge」タイトルが表示

##### 2. カウントダウンとタップ時間の設定
- **カウントダウン**: 開始前の準備時間(デフォルト: 3秒)
- **タップ時間**: タップできる時間(デフォルト: 10秒)
- 練習モードと同じ設定で実施するのがおすすめ

##### 3. スタート
1. 「スタート」ボタンをクリック
2. 投影画面にカウントダウン表示: **3 → 2 → 1 → START!**
3. タップ時間が表示され、カウントダウン開始: **10 → 9 → ... → 1 → STOP!**
4. 自動停止後「TIME UP! 結果発表まで少々お待ちください」と表示

##### 4. ランキング表示
1. 「ランキング表示」ボタンをクリック
2. 投影画面にランキングが表示
   - **全体ランキングスクロール**: 全員のランキングが下から上へスクロール表示
   - **TOP3表彰台**: 1位・2位・3位が表彰台スタイルで表示

##### 5. スコアリセット(必要に応じて)
- 「スコアリセット」ボタンで全員のタップスコアをリセット
- 再度タップチャレンジを行う場合に使用

#### 💡 本番モードの進行例
1. 練習モードで操作方法を説明
2. 本番モードに切り替え
3. スタートして自動停止まで待つ
4. ランキング表示で盛り上げる

---

## 詳細設定

管理画面右上の「設定」ボタンをクリックすると、詳細設定画面が開きます

### クイズ一覧タブ

#### 内容
- 全6問のクイズ内容を確認できます
- 問題文、選択肢、正解、画像の有無を確認
- 早押しクイズ(第6問)にはマーク表示

#### 用途
- 進行前に問題内容を確認
- 司会者が問題を読み上げる際の参考資料

---

### 代表者設定タブ

#### 概要
- クイズモードで「代表者制」を有効にする場合に使用
- 各テーブルの回答代表者を事前登録

#### 操作手順

1. **代表者の追加**
   - テーブル番号(例: `A`)と代表者名(例: `山田太郎`)を入力
   - 「追加」ボタンをクリック

2. **登録済み代表者の確認**
   - 追加した代表者が一覧表示されます
   - 削除したい場合はゴミ箱アイコンをクリック

3. **保存**
   - 「保存して投影画面に表示」ボタンをクリック
   - 投影画面(クイズ待機中)に「各テーブルの回答代表者」が表示されます

#### 💡 代表者設定の使い方
- 各テーブルに1名ずつ代表者を決めてもらい、事前に登録
- クイズモードで「代表者制」にチェックを入れると、代表者のみ回答可能になります
- 投影画面に代表者名が表示されるので、会場全体で誰が代表かわかります

---

## ユーザー管理

### 全ユーザーをリセット

#### 概要
- 全ての参加者データ(プレイヤー、スコア、回答履歴)を削除
- 本番前の検証データやテストユーザーをクリーンにする場合に使用

#### 操作手順
1. 管理画面の「ユーザー管理」パネル内の「全ユーザーをリセット」ボタンをクリック
2. 確認ダイアログで「実行する」をクリック

⚠️ **注意**: この操作は取り消せません。本番中には絶対に実行しないでください

---

## トラブルシューティング

### 問題1: 参加者がURLにアクセスできない

**原因**
- ルームコードが間違っている
- インターネット接続が不安定

**解決策**
- ルームコードを再確認してURLを共有
- Wi-Fi接続を確認してもらう

---

### 問題2: 投影画面が表示されない

**原因**
- ブラウザの互換性問題
- 全画面表示が正しく設定されていない

**解決策**
- Chrome、Safari、Edgeの最新版を使用
- Fキーを押して全画面表示を再設定

---

### 問題3: クイズの回答が反映されない

**原因**
- 参加者のインターネット接続が不安定
- 代表者制が有効で、代表者以外が回答している

**解決策**
- 参加者にWi-Fi接続を確認してもらう
- 代表者制のチェックボックスを確認

---

### 問題4: ランキングが表示されない

**原因**
- ゲームが終了していない
- ランキング表示ボタンを押していない

**解決策**
- ゲームが完全に終了していることを確認
- 管理画面で「ランキング表示」ボタンをクリック

---

### 問題5: PINを忘れた

**原因**
- 管理用PINコードを忘れた

**解決策**
- システム管理者に連絡して、PINをリセットしてもらう
- 環境変数 `ADMIN_SHARED_PASSCODE` を確認

---

## 進行の流れ(例)

### パーティー開始前
1. 管理画面にログイン
2. 投影画面を全画面表示でプロジェクターに投影
3. 待機モードにして、参加者に参加用URLを共有
4. 参加者が集まるのを待つ

### クイズゲーム
1. クイズモードに切り替え
2. 代表者制を有効にする場合は、詳細設定で代表者を登録
3. クイズを1問ずつ表示→正解公開→次のクイズへ
4. 第5問終了後、ランキング表示
5. 早押しクイズ(第6問)を実施
6. ランキング表示で締めくくり

### タップチャレンジ
1. タップ(練習)モードで参加者に操作方法を説明
2. タップ(本番)モードに切り替え
3. スタートして自動停止まで待つ
4. ランキング表示で盛り上がる

### パーティー終了
1. 待機モードに戻す
2. 必要に応じてスコアやユーザーをリセット

---

## サポート情報

### 緊急時の連絡先
- システム管理者: [連絡先を記入]

### その他の注意事項
- 本番中はブラウザを閉じない
- 管理画面のタブと投影画面のタブを混同しない
- 参加者には事前にスマホのバッテリーを確認してもらう

---

以上がスタッフ操作マニュアルです。パーティーの成功をお祈りしています！
